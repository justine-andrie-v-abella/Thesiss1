<!-- ============================================================================
FILE: templates/admin_dashboard/add_teacher.html
============================================================================ -->
{% extends 'base.html' %}

{% block title %}Add Teacher - Admin{% endblock %}

{% block header_title %}Add New Teacher{% endblock %}
{% block header_subtitle %}Register a new teacher account{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <!-- Back Button -->
    <div class="mb-6">
        <a 
            href="{% url 'accounts:manage_teachers' %}" 
            class="inline-flex items-center text-gray-600 hover:text-gray-800 transition-colors"
        >
            <i class="bi bi-arrow-left mr-2"></i>
            Back to Teachers
        </a>
    </div>

    <!-- Form Card -->
    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
        <div class="bg-gradient-to-r from-green-500 to-green-600 px-6 py-4">
            <h2 class="text-xl font-bold text-white flex items-center">
                <i class="bi bi-person-plus text-2xl mr-3"></i>
                Teacher Registration Form
            </h2>
        </div>

        <form method="post" class="p-8">
            {% csrf_token %}
            
            <!-- User Information Section -->
            <div class="mb-8">
                <h3 class="text-lg font-bold text-gray-800 mb-4 pb-2 border-b-2 border-green-500 inline-block">
                    <i class="bi bi-person-circle text-green-500 mr-2"></i>
                    User Information
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mt-5">
                    <!-- First Name -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="bi bi-person text-green-500 mr-1"></i>
                            First Name *
                        </label>
                        <input 
                            type="text" 
                            name="first_name" 
                            value="{{ form.first_name.value|default:'' }}"
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500 transition-colors"
                            placeholder="Enter first name"
                            required
                        >
                        {% if form.first_name.errors %}
                            <p class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="bi bi-exclamation-circle mr-1"></i>
                                {{ form.first_name.errors.0 }}
                            </p>
                        {% endif %}
                    </div>

                    <!-- Last Name -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="bi bi-person text-green-500 mr-1"></i>
                            Last Name *
                        </label>
                        <input 
                            type="text" 
                            name="last_name" 
                            value="{{ form.last_name.value|default:'' }}"
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500 transition-colors"
                            placeholder="Enter last name"
                            required
                        >
                        {% if form.last_name.errors %}
                            <p class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="bi bi-exclamation-circle mr-1"></i>
                                {{ form.last_name.errors.0 }}
                            </p>
                        {% endif %}
                    </div>

                    <!-- Email -->
                    <div class="md:col-span-2">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="bi bi-envelope text-green-500 mr-1"></i>
                            Email Address *
                        </label>
                        <input 
                            type="email" 
                            name="email" 
                            value="{{ form.email.value|default:'' }}"
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500 transition-colors"
                            placeholder="teacher@example.com"
                            required
                        >
                        {% if form.email.errors %}
                            <p class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="bi bi-exclamation-circle mr-1"></i>
                                {{ form.email.errors.0 }}
                            </p>
                        {% endif %}
                    </div>

                    <!-- Username -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="bi bi-at text-green-500 mr-1"></i>
                            Username *
                        </label>
                        <input 
                            type="text" 
                            name="username" 
                            value="{{ form.username.value|default:'' }}"
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500 transition-colors"
                            placeholder="Choose username"
                            required
                        >
                        {% if form.username.errors %}
                            <p class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="bi bi-exclamation-circle mr-1"></i>
                                {{ form.username.errors.0 }}
                            </p>
                        {% endif %}
                    </div>

                    <!-- Password -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="bi bi-lock text-green-500 mr-1"></i>
                            Password *
                        </label>
                        <input 
                            type="password" 
                            name="password" 
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500 transition-colors"
                            placeholder="Enter password"
                            required
                        >
                        {% if form.password.errors %}
                            <p class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="bi bi-exclamation-circle mr-1"></i>
                                {{ form.password.errors.0 }}
                            </p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Teacher Information Section -->
            <div class="mb-8">
                <h3 class="text-lg font-bold text-gray-800 mb-4 pb-2 border-b-2 border-green-500 inline-block">
                    <i class="bi bi-person-badge text-green-500 mr-2"></i>
                    Teacher Information
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mt-5">
                    <!-- Employee ID -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="bi bi-hash text-green-500 mr-1"></i>
                            Employee ID *
                        </label>
                        <input 
                            type="text" 
                            name="employee_id" 
                            value="{{ form.employee_id.value|default:'' }}"
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500 transition-colors uppercase"
                            placeholder="e.g., EMP001"
                            required
                        >
                        {% if form.employee_id.errors %}
                            <p class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="bi bi-exclamation-circle mr-1"></i>
                                {{ form.employee_id.errors.0 }}
                            </p>
                        {% endif %}
                    </div>

                    <!-- Department - FIXED VERSION -->
                    <div>
                        <label for="id_department" class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="bi bi-building text-green-500 mr-1"></i>
                            Department *
                        </label>
                        <div class="relative">
                            {{ form.department }}
                        </div>
                        {% if form.department.errors %}
                            <p class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="bi bi-exclamation-circle mr-1"></i>
                                {{ form.department.errors.0 }}
                            </p>
                        {% endif %}
                    </div>

                    <!-- Phone -->
                    <div class="md:col-span-2">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="bi bi-telephone text-green-500 mr-1"></i>
                            Phone Number
                        </label>
                        <input 
                            type="text" 
                            name="phone" 
                            value="{{ form.phone.value|default:'' }}"
                            class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-green-500 transition-colors"
                            placeholder="e.g., +1234567890"
                        >
                        {% if form.phone.errors %}
                            <p class="text-red-500 text-sm mt-1 flex items-center">
                                <i class="bi bi-exclamation-circle mr-1"></i>
                                {{ form.phone.errors.0 }}
                            </p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex space-x-4 pt-6 border-t border-gray-200">
                <button 
                    type="submit" 
                    class="flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-600 hover:to-green-700 transition-all transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center"
                >
                    <i class="bi bi-check-circle text-xl mr-2"></i>
                    Add Teacher
                </button>
                <a 
                    href="{% url 'accounts:manage_teachers' %}"
                    class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-6 rounded-lg transition-all flex items-center justify-center"
                >
                    <i class="bi bi-x-circle text-xl mr-2"></i>
                    Cancel
                </a>
            </div>
        </form>
    </div>

    <!-- Info Card -->
    <div class="mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200">
        <div class="flex items-start">
            <div class="flex-shrink-0">
                <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                    <i class="bi bi-info-circle text-white text-2xl"></i>
                </div>
            </div>
            <div class="ml-4">
                <h4 class="text-lg font-bold text-gray-800 mb-2">Important Information</h4>
                <ul class="space-y-2 text-sm text-gray-700">
                    <li class="flex items-start">
                        <i class="bi bi-check-circle-fill text-green-500 mr-2 mt-0.5"></i>
                        <span>All fields marked with * are required</span>
                    </li>
                    <li class="flex items-start">
                        <i class="bi bi-check-circle-fill text-green-500 mr-2 mt-0.5"></i>
                        <span>Employee ID must be unique and cannot be changed later</span>
                    </li>
                    <li class="flex items-start">
                        <i class="bi bi-check-circle-fill text-green-500 mr-2 mt-0.5"></i>
                        <span>Email address will be used for login and notifications</span>
                    </li>
                    <li class="flex items-start">
                        <i class="bi bi-check-circle-fill text-green-500 mr-2 mt-0.5"></i>
                        <span>Teacher will be able to change their password after first login</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
    /* Style the department select field to match other inputs */
    select[name="department"] {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 2px solid #d1d5db;
        border-radius: 0.5rem;
        font-size: 1rem;
        transition: border-color 0.2s;
        background-color: white;
        cursor: pointer;
    }
    
    select[name="department"]:focus {
        outline: none;
        border-color: #10b981;
    }
    
    select[name="department"] option:first-child {
        color: #9ca3af;
    }
    
    /* Auto-uppercase for employee ID */
    input[name="employee_id"] {
        text-transform: uppercase;
    }
    
    @keyframes slide-in {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    
    .animate-slide-in {
        animation: slide-in 0.3s ease-out;
    }
</style>
{% endblock %}